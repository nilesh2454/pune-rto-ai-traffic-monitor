<div *ngIf="isOpen" class="fixed inset-0 bg-black/40 z-40 flex items-start justify-center px-4 pt-6">
  <div class="bg-card rounded-lg border shadow-xl w-full max-w-lg p-6 space-y-6 relative max-h-[90vh] overflow-y-auto">
    <button
      class="absolute top-3 right-3 text-muted-foreground hover:text-foreground"
      (click)="close()"
      aria-label="Close"
    >
      <lucide-icon name="x" class="w-5 h-5"></lucide-icon>
    </button>

    <div>
      <h2 class="text-lg font-semibold flex items-center gap-2">
        <lucide-icon name="send" class="w-5 h-5 text-primary"></lucide-icon>
        Share Fine Slip
      </h2>
      <p class="text-sm text-muted-foreground">
        Send the e-challan to the vehicle owner via SMS or Email.
      </p>
    </div>

    <div class="p-3 bg-muted rounded-lg text-center">
      <p class="text-xs text-muted-foreground">Challan ID</p>
      <p class="font-mono font-bold text-primary">{{ data.challanId }}</p>
    </div>

    <div class="space-y-4">
      <div class="space-y-2">
        <div class="flex items-center gap-2">
          <lucide-icon name="smartphone" class="w-4 h-4 text-primary"></lucide-icon>
          <span class="font-medium text-sm">Send via SMS</span>
        </div>
        <div class="flex flex-col sm:flex-row gap-2">
          <input
            class="w-full sm:flex-1 px-3 py-2 rounded-md border border-input bg-background hover:border-primary/50 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-colors"
            placeholder="+91 9876543210"
            [(ngModel)]="mobile"
          />
          <button
            style="background-color: #2563eb; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; min-width: 100px;"
            [disabled]="sendingSMS"
            (click)="sendSMS()"
          >
            {{ sendingSMS ? 'Sending...' : 'Send SMS' }}
          </button>
        </div>
      </div>

      <div class="space-y-2">
        <div class="flex items-center gap-2">
          <lucide-icon name="mail" class="w-4 h-4 text-primary"></lucide-icon>
          <span class="font-medium text-sm">Send via Email</span>
        </div>
        <div class="flex flex-col sm:flex-row gap-2">
          <input
            class="w-full sm:flex-1 px-3 py-2 rounded-md border border-input bg-background hover:border-primary/50 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-colors"
            placeholder="user@email.com"
            type="email"
            [(ngModel)]="email"
          />
          <button
            style="background-color: #2563eb; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; min-width: 100px;"
            [disabled]="sendingEmail"
            (click)="sendEmail()"
          >
            {{ sendingEmail ? 'Sending...' : 'Send Email' }}
          </button>
        </div>
      </div>
    </div>

    <div class="p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-xs text-yellow-700">
      <span class="font-medium">Demo Mode:</span> No actual SMS/Email will be sent. This is a simulation.
    </div>

    <div class="flex justify-end">
      <button class="px-4 py-2 border rounded-md hover:bg-muted" (click)="close()">
        Close
      </button>
    </div>
  </div>
</div>
